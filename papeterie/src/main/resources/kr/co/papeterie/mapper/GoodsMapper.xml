<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.papeterie.mapper.GoodsMapper">
	<select id="goods_view" resultType="kr.co.papeterie.vo.GoodsVO">
		select * from product where pcode=#{param1}
	</select>
	<select id="get_member" resultType="kr.co.papeterie.vo.MemberVO">
		select * from member where userid=#{param1}
	</select>
	<select id="get_juso" resultType="kr.co.papeterie.vo.AddressVO">
		select * from address where userid=#{param1} and sdefault=1
	</select>
	<select id="myjuso" resultType="kr.co.papeterie.vo.AddressVO">
		select * from address where userid=#{param1}
	</select>
	<insert id="address_add_ok" parameterType="kr.co.papeterie.vo.AddressVO">
		insert into address name (addr_name, userid, rname, zip, addr1, addr2, phone, sdefault, soption)
		values (#{addr_name}, #{userid}, #{rname}, #{zip}, #{addr1}, #{addr2}, #{phone}, #{sdefault}, #{soption})
	</insert>
	<select id="address_recent_id" resultType="Integer">
		select idx from address where userid=#{param1} order by idx desc limit 0, 1
	</select>
	<update id="address_update" parameterType="kr.co.papeterie.vo.AddressVO">
		update address set addr_name=#{addr_name}, rname=#{rname}, zip=#{zip}, addr1=#{addr1}, addr2=#{addr2}, phone=#{phone}, soption=#{soption} where idx=#{idx}
	</update>
	<select id="make_order_code" resultType="Integer">
		select count(distinct order_code) from porder where regdate like concat('%',#{param1},'%')
	</select>
	<insert id="purchase_ok" parameterType="kr.co.papeterie.vo.OrderVO">
		insert into porder (order_code, userid, pcode, count, price, ship_price, addr_id, pay_type, bank, card, halbu, com, phone, state)
		values (#{order_code}, #{userid}, #{pcode}, #{count}, #{price}, #{ship_price}, #{addr_id}, #{pay_type}, #{bank}, #{card}, #{halbu}, #{com}, #{phone}, #{state})
	</insert>
	
</mapper>